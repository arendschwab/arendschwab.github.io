<!DOCTYPE html> <html lang="en"> <head> <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"> <meta charset="utf-8"> <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"> <meta http-equiv="X-UA-Compatible" content="IE=edge"> <title>pshacker | Arend Schwab</title> <meta name="author" content="Arend L. Schwab"> <meta name="description" content="A Matlab interface for programming postscript figures"> <meta name="keywords" content="jekyll, jekyll-theme, academic-website, portfolio-website"> <link rel="stylesheet" href="/assets/css/bootstrap.min.css?a4b3f509e79c54a512b890d73235ef04"> <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/css/mdb.min.css" integrity="sha256-jpjYvU3G3N6nrrBwXJoVEYI/0zw8htfFnhT9ljN3JJw=" crossorigin="anonymous"> <link defer rel="stylesheet" href="https://unpkg.com/bootstrap-table@1.22.1/dist/bootstrap-table.min.css"> <link rel="stylesheet" href="/assets/css/academicons.min.css?f0b7046b84e425c55f3463ac249818f5"> <link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700|Roboto+Slab:100,300,400,500,700|Material+Icons"> <link rel="stylesheet" href="/assets/css/jekyll-pygments-themes-github.css?19f3075a2d19613090fe9e16b564e1fe" media="" id="highlight_theme_light"> <link rel="shortcut icon" href="data:image/svg+xml,&lt;svg%20xmlns=%22http://www.w3.org/2000/svg%22%20viewBox=%220%200%20100%20100%22&gt;&lt;text%20y=%22.9em%22%20font-size=%2290%22&gt;%E2%9A%9B%EF%B8%8F&lt;/text&gt;&lt;/svg&gt;"> <link rel="stylesheet" href="/assets/css/main.css?d41d8cd98f00b204e9800998ecf8427e"> <link rel="canonical" href="arendschwab.com/research/pshacker/"> <link rel="stylesheet" href="/assets/css/jekyll-pygments-themes-native.css?e74e74bf055e5729d44a7d031a5ca6a5" media="none" id="highlight_theme_dark"> <script src="/assets/js/theme.js?6185d15ea1982787ad7f435576553d64"></script> </head> <body class="fixed-top-nav "> <header> <nav id="navbar" class="navbar navbar-light navbar-expand-sm fixed-top"> <div class="container"> <a class="navbar-brand title font-weight-lighter" href="/">Arend Schwab</a> <button class="navbar-toggler collapsed ml-auto" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation"> <span class="sr-only">Toggle navigation</span> <span class="icon-bar top-bar"></span> <span class="icon-bar middle-bar"></span> <span class="icon-bar bottom-bar"></span> </button> <div class="collapse navbar-collapse text-right" id="navbarNav"> <ul class="navbar-nav ml-auto flex-nowrap"> <li class="nav-item "> <a class="nav-link" href="/">about</a> </li> <li class="nav-item "> <a class="nav-link" href="/blog/">blog</a> </li> <li class="nav-item "> <a class="nav-link" href="/publications/">publications</a> </li> <li class="nav-item "> <a class="nav-link" href="/projects/">projects</a> </li> <li class="nav-item "> <a class="nav-link" href="/repositories/">repositories</a> </li> <li class="nav-item "> <a class="nav-link" href="/cv/">cv</a> </li> <li class="nav-item active"> <a class="nav-link" href="/research/">research<span class="sr-only">(current)</span></a> </li> <li class="nav-item "> <a class="nav-link" href="/teaching/">teaching</a> </li> <li class="nav-item "> <a class="nav-link" href="/people/">people</a> </li> <li class="nav-item dropdown "> <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">submenus</a> <div class="dropdown-menu dropdown-menu-right" aria-labelledby="navbarDropdown"> <a class="dropdown-item " href="/publications/">publications</a> <div class="dropdown-divider"></div> <a class="dropdown-item " href="/projects/">projects</a> <div class="dropdown-divider"></div> <a class="dropdown-item " href="/blog/">blog</a> </div> </li> <li class="toggle-container"> <button id="light-toggle" title="Change theme"> <i class="fa-solid fa-moon"></i> <i class="fa-solid fa-sun"></i> </button> </li> </ul> </div> </div> </nav> <progress id="progress" value="0"> <div class="progress-container"> <span class="progress-bar"></span> </div> </progress> </header> <div class="container mt-5"> <div class="post"> <header class="post-header"> <h1 class="post-title">pshacker</h1> <p class="post-description">A Matlab interface for programming postscript figures</p> </header> <article> <h3 id="alschwab-and-jpmeijaard">A. L. Schwab and J. P. Meijaard</h3> <p>PostScript is a graphic programming language developed by Adobe Systems that allows its user to produce high-quality graphics and text that can be printed.</p> <p>The language is somewhat hard to use because it uses this crazy Reverse Polish Notation (RPN). Therefore we wrote a Matlab wrapper around it, with identical function names as the postscript function names. These collection of Matlab functions are called 'pshacker'.</p> <p>A quick and easy introduction to postscript is 'Learning PostScript by Doing', by Andre Heck (2005):<br> <a href="http://staff.science.uva.nl/~heck/Courses/Mastercourse2005/tutorial.pdf" rel="external nofollow noopener" target="_blank">http://staff.science.uva.nl/~heck/Courses/Mastercourse2005/tutorial.pdf</a></p> <p>The official postscript language reference books are the 'green book':<br> <a href="http://www-cdf.fnal.gov/offline/PostScript/GREENBK.PDF" rel="external nofollow noopener" target="_blank">http://www-cdf.fnal.gov/offline/PostScript/GREENBK.PDF</a><br> and the 'blue book' (tutorials):<br> <a href="http://www-cdf.fnal.gov/offline/PostScript/BLUEBOOK.PDF" rel="external nofollow noopener" target="_blank">http://www-cdf.fnal.gov/offline/PostScript/BLUEBOOK.PDF</a></p> <p>We learn by example. Read page 1-5 from Heck 2005.</p> <p>The equivalent pshacker matlab program for EXERCISE 2 is <a href="exercise2.m">exercise2.m</a>:</p> <blockquote> <p>\% define a global variable which holds the postscript file identifier<br> global PSFID<br> % open the file that will contain the postsript commands<br> PSFID=fopen('exercise2.ps','w')<br> % write the header that every ps file needs<br> header<br> % write the bounding box to the file<br> boundingbox(5,5,105,105)<br> % write some shorthand notations to the file<br> prolog<br> a=10;<br> b=90;<br> newpath<br> moveto(a,a)<br> rlineto(b,0)<br> rlineto(0,b)<br> rlineto(-b,0)<br> closepath<br> setlinewidth(5)<br> stroke<br> showpage<br> % write some closing postscript statements to the file<br> trailer<br> eof<br> % close the file<br> fclose(PSFID)</p> </blockquote> <p>And then the postscript file <a href="exercise2.ps">exercise2.ps</a> which exercise2.m creates looks like this:</p> <blockquote> <p>%!PS-Adobe-3.0<br> %%BoundingBox: 5 5 105 105<br> %%BeginProlog<br> /CP /closepath load def<br> /CT /curveto load def<br> /GR /grestore load def<br> /GS /gsave load def<br> /L /lineto load def<br> /M /moveto load def<br> /NP /newpath load def<br> /RC /rcurveto load def<br> /RF /rectfill load def<br> /RS /rectstroke load def<br> /RL /rlineto load def<br> /RM /rmoveto load def<br> /RO /rotate load def<br> /SC /scale load def<br> /SF /selectfont load def<br> /SD /setdash load def<br> /SG /setgray load def<br> /SL /setlinewidth load def<br> /S /show load def<br> /ST /stroke load def<br> /TR /translate load def<br> /SHB {dup stringwidth pop neg exch show 0 rmoveto} def<br> /SHL {dup stringwidth pop neg 0 rmoveto show} def<br> /SHM {dup stringwidth pop 2 div neg 0 rmoveto show} def<br> %%EndProlog<br> NP<a href="exercise2.ps"><img src="exercise2.jpg" alt="">{border=”0” width=”154” height=”157” align=”right”}</a><br> 10 10 M<br> 90 0 RL<br> 0 90 RL<br> -90 0 RL<br> CP<br> 5 SL<br> ST<br> showpage<br> %%Trailer<br> %%EOF</p> </blockquote> <p>The first line %! is mandatory and tells us its postscript. Next the bounding box is defined. The prolog has a number of definitions with shorthand notations, these make the postscipt file shorter because instead of writing 10 10 moveto we can write 10 10 M, a silent convention is that self made definitions are in capitols.<br> After the prolog we finally have our small example, the drawing of a rectangle. Note that we have used variables a and b in the Matlab file instead of the constants 10 and 90. This is one of the most powerful instruments you have with pshacker; your figure is parameterized. Of course this can also be done within the postscript language but the RPN make this and the writing of functions within postscript very cumbersome!</p> <p>An alphabetic list of the implemented postscript commands is given below. Not all postscript commands are yet implemented, but the collection below has served me well up till now. I tried to keep the postscript command and the matlab function the same, this worked for almost all commands but for a few which already existed in Matlab like fill. Here is the alphabetic overview:</p> <blockquote> <p>arc(x,y,r,ang1,ang2)<br> arcn(x,y,r,ang1,ang2)<br> arct(x,y,r,ang1,ang2)<br> boundingbox(llx,lly,urx,ury)<br> circle(x,y,r)<br> closepath<br> comment(str)<br> creationdate(str)<br> creator(str)<br> curveto(x1,y1,x2,y2,x3,y3)<br> eof<br> fil<br> grestore<br> gsave<br> header<br> initclip<br> lineto(x,y)<br> moveto(x,y)<br> newpath<br> pijlpunt(xp,yp,angle,dx,dy)<br> pijl(x1,y1,x2,y2,dx,dy)<br> prolog<br> pstitle(str)<br> rcurveto(dx1,dy1,dx2,dy2,dx3,dy3)<br> rectclip(x,y,width,height)<br> rectfill(x,y,width,height)<br> rectstroke(x,y,width,height)<br> rlineto(x,y)<br> rmoveto(x,y)<br> rotate(dalfa)<br> scale(sx,sy)<br> selectfont(fontname,fontsize)<br> setdash(arr,offset)<br> setgray(x)<br> setlinecap(x)<br> setlinejoin(x)<br> setlinewidth(x)<br> setmiterlimit(x)<br> show(str)<br> showback(str)<br> showl(str)<br> showm(str)<br> showpage<br> stroke<br> title(str)<br> trailer<br> translate(x,y)</p> </blockquote> <p>These files can be found in the zip file <a href="pshacker.zip">pshacker.zip</a>. Unzip the file in a directory on your computer f.i. D:/MATLAB/user/pshacker and add this path to the Matlab path: path(path,'D:/MATLAB/user/pshacker').If you write an m-file to make a new figure don't forget to put in as one of the first lines of your code the declaration of this global variable PSFID, global PSFID.</p> <p>The implementation of the commands is very straight forward, as an example I show the m-file <a href="moveto.m">moveto.m</a> for the postscript command moveto:</p> <blockquote> <p>function moveto(x,y)<br> global PSFID<br> <br> if nargin==1<br>    fprintf(PSFID,'%g %g M\n',x(1),x(2));<br> else<br>    fprintf(PSFID,'%g %g M\n',x,y);<br> end</p> </blockquote> <p>It simply makes use of the fprintf command to write the postscript command together with the numeric data to the file in this weird RPN. Note that you can call moveto(P) with an array P then it assumes that the fist element P(1) holds x and the second element P(2) holds y. I have also created some handy extra functions like f.i. pijl(x1,y1,x2,y2,dx,dy) which draws a line with an arrow head.<br> If you miss a postscript command then its very easy to add that to your implementation.</p> <p>Next I will give two examples of application, a drawing and a graph. Just run the m-file, look at the figure and then look in the m-file for the commands I used. No nice programming things, just some examples.</p> <p>The first example is a drawing of a bicycle, <a href="fig1aBicycleModel.m">fig1aBicycleModel.m</a>. The resulting figure should look like this:</p> <blockquote> <p>global PSFID<a href="fig1aBicycleModel.ps"><img src="fig1aBicycleModel.jpg" alt="">{border=”0” width=”315” height=”247” align=”right”}</a><br> <br> PSFID=fopen('fig1aBicycleModel.ps','w')<br> header<br> boundingbox(152,169,405,357)<br> pstitle('Bicycle model degrees of freedom')<br> creator('pshacker')<br> creationdate(date)<br> prolog<br> dots=0.24;<br> translate(200,200)<br> selectfont('Helvetica-Oblique',10)<br> <br> % JBini_Benchmark2.m<br> scf=140;<br> <br> l=scf*1.02;<br> Rr=scf*0.33;<br> Rf=scf*0.33;<br> lambda=pi/10;<br> trail=scf*0.08;<br> .......….</p> </blockquote> <p>The second example is a graph. The data for the graph is in the Matlab data file <a href="run19sm.mat">run19sm.mat</a> and the m-file which generates the graph is <a href="fig3bLeanYawRateStableBicycle.m">fig3bLeanYawRateStableBicycle.m</a>. The figure should look like this:</p> <blockquote> <p>function fig4<br> <br> global PSFID<br> if exist('tdleans')~=1<br> load run19sm.mat;<br> end;<br> PSFID=fopen('fig3bLeanYawRateStableBicycle.ps','w')<br> header<br> boundingbox(164,381,401,582)<br> pstitle('Stable Bicycle GB7Sv9e lean and yaw angles and rates measured and simulated')<br> creator('pshacker')<a href="fig3bLeanYawRateStableBicycle.ps"><img src="fig3bLeanYawRateStableBicycle.jpg" alt="">{border=”0” width=”372” height=”313” align=”right”}</a><br> creationdate(date)<br> prolog<br> d=0.24;<br> translate(200,400)<br> selectfont('Helvetica-Oblique',8)<br> % b=5*40;<br> % h=8*18;<br> b=5*40;<br> h=8*22.5;<br> xmin=0;<br> xmax=5;<br> dx=xmax-xmin;<br> <br> ymin=-0.8;<br> ymax=0.8;<br> dy=ymax-ymin;<br> <br> newpath<br> setlinewidth(3*d)<br> moveto(0,h+1*d/2)<br> lineto(0,0)<br> lineto(b+1*d/2,0)<br> stroke<br> %rectstroke(0,0,b,h)<br> newpath<br> setlinewidth(1*d)<br> nb=5;<br> % gridlines<br> ..........…</p> </blockquote> <p>Success with pshacker, I do hope you enjoy 'programming' your figures as much as we do!</p> <p>Questions or comments?<br> <a href="mailto:a.l.schwab@tudelft.nl?subject=pshacker">a.l.schwab@tudelft.nl</a></p> <hr> <p>(I made some extension to 2D plotting from 3D data with general projection methods. The m-files are already in the zip file but I will discuss this some time later.) :::</p> </article> <h2>References</h2> <div class="publications"> <h2 class="bibliography">1956</h2> <ol class="bibliography"><li> <div class="row"> <div class="col-sm-2 preview"> <figure> <picture> <source class="responsive-img-srcset" srcset=" /assets/img/publication_preview/brownian-motion-480.webp 480w, /assets/img/publication_preview/brownian-motion-800.webp 800w, /assets/img/publication_preview/brownian-motion-1400.webp 1400w, " sizes="200px" type="image/webp"></source> <img src="/assets/img/publication_preview/brownian-motion.gif" class="preview z-depth-1 rounded" width="100%" height="auto" alt="brownian-motion.gif" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> <div id="einstein1956investigations" class="col-sm-8"> <div class="title">Investigations on the Theory of the Brownian Movement</div> <div class="author"> <em>Albert Einstein</em> </div> <div class="periodical"> 1956 </div> <div class="periodical"> </div> <div class="links"> <a class="bibtex btn btn-sm z-depth-0" role="button">Bib</a> </div> <div class="bibtex hidden"> <figure class="highlight"><pre><code class="language-bibtex" data-lang="bibtex"><span class="nc">@book</span><span class="p">{</span><span class="nl">einstein1956investigations</span><span class="p">,</span>
  <span class="na">title</span> <span class="p">=</span> <span class="s">{Investigations on the Theory of the Brownian Movement}</span><span class="p">,</span>
  <span class="na">author</span> <span class="p">=</span> <span class="s">{Einstein, Albert}</span><span class="p">,</span>
  <span class="na">year</span> <span class="p">=</span> <span class="s">{1956}</span><span class="p">,</span>
  <span class="na">publisher</span> <span class="p">=</span> <span class="s">{Courier Corporation}</span><span class="p">,</span>
<span class="p">}</span></code></pre></figure> </div> </div> </div> </li></ol> <h2 class="bibliography">1950</h2> <ol class="bibliography"><li> <div class="row"> <div class="col-sm-2 abbr"><abbr class="badge" style="background-color:#00369f"><a href="https://aapt.scitation.org/journal/ajp" rel="external nofollow noopener" target="_blank">AJP</a></abbr></div> <div id="einstein1950meaning" class="col-sm-8"> <div class="title">The meaning of relativity</div> <div class="author"> <em>Albert Einstein</em>, and AH Taub</div> <div class="periodical"> <em>American Journal of Physics</em>, 1950 </div> <div class="periodical"> </div> <div class="links"> <a class="bibtex btn btn-sm z-depth-0" role="button">Bib</a> </div> <div class="bibtex hidden"> <figure class="highlight"><pre><code class="language-bibtex" data-lang="bibtex"><span class="nc">@article</span><span class="p">{</span><span class="nl">einstein1950meaning</span><span class="p">,</span>
  <span class="na">title</span> <span class="p">=</span> <span class="s">{The meaning of relativity}</span><span class="p">,</span>
  <span class="na">author</span> <span class="p">=</span> <span class="s">{Einstein, Albert and Taub, AH}</span><span class="p">,</span>
  <span class="na">journal</span> <span class="p">=</span> <span class="s">{American Journal of Physics}</span><span class="p">,</span>
  <span class="na">volume</span> <span class="p">=</span> <span class="s">{18}</span><span class="p">,</span>
  <span class="na">number</span> <span class="p">=</span> <span class="s">{6}</span><span class="p">,</span>
  <span class="na">pages</span> <span class="p">=</span> <span class="s">{403--404}</span><span class="p">,</span>
  <span class="na">year</span> <span class="p">=</span> <span class="s">{1950}</span><span class="p">,</span>
  <span class="na">publisher</span> <span class="p">=</span> <span class="s">{American Association of Physics Teachers}</span>
<span class="p">}</span></code></pre></figure> </div> </div> </div> </li></ol> </div> </div> </div> <footer class="fixed-bottom"> <div class="container mt-0"> © Copyright 2025 Arend L. Schwab. Powered by <a href="https://jekyllrb.com/" target="_blank" rel="external nofollow noopener">Jekyll</a> with <a href="https://github.com/alshedivat/al-folio" rel="external nofollow noopener" target="_blank">al-folio</a> theme. Hosted by <a href="https://pages.github.com/" target="_blank" rel="external nofollow noopener">GitHub Pages</a>. Photos from <a href="https://unsplash.com" target="_blank" rel="external nofollow noopener">Unsplash</a>. </div> </footer> <script src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script> <script src="/assets/js/bootstrap.bundle.min.js"></script> <script src="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/js/mdb.min.js" integrity="sha256-NdbiivsvWt7VYCt6hYNT3h/th9vSTL4EDWeGs5SN3DA=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/masonry-layout@4.2.2/dist/masonry.pkgd.min.js" integrity="sha256-Nn1q/fx0H7SNLZMQ5Hw5JLaTRZp0yILA/FRexe19VdI=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/imagesloaded@4/imagesloaded.pkgd.min.js"></script> <script defer src="/assets/js/masonry.js" type="text/javascript"></script> <script defer src="https://cdn.jsdelivr.net/npm/medium-zoom@1.0.8/dist/medium-zoom.min.js" integrity="sha256-7PhEpEWEW0XXQ0k6kQrPKwuoIomz8R8IYyuU1Qew4P8=" crossorigin="anonymous"></script> <script defer src="/assets/js/zoom.js?7b30caa5023af4af8408a472dc4e1ebb"></script> <script defer src="https://unpkg.com/bootstrap-table@1.22.1/dist/bootstrap-table.min.js"></script> <script src="/assets/js/no_defer.js?d633890033921b33e0ceb13d22340a9c"></script> <script defer src="/assets/js/common.js?acdb9690d7641b2f8d40529018c71a01"></script> <script defer src="/assets/js/copy_code.js?9b43d6e67ddc7c0855b1478ee4c48c2d" type="text/javascript"></script> <script async src="https://d1bxh8uas1mnw7.cloudfront.net/assets/embed.js"></script> <script async src="https://badge.dimensions.ai/badge.js"></script> <script type="text/javascript">window.MathJax={tex:{tags:"ams"}};</script> <script defer type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3.2.0/es5/tex-mml-chtml.js"></script> <script defer src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script> <script type="text/javascript">function progressBarSetup(){"max"in document.createElement("progress")?(initializeProgressElement(),$(document).on("scroll",function(){progressBar.attr({value:getCurrentScrollPosition()})}),$(window).on("resize",initializeProgressElement)):(resizeProgressBar(),$(document).on("scroll",resizeProgressBar),$(window).on("resize",resizeProgressBar))}function getCurrentScrollPosition(){return $(window).scrollTop()}function initializeProgressElement(){let e=$("#navbar").outerHeight(!0);$("body").css({"padding-top":e}),$("progress-container").css({"padding-top":e}),progressBar.css({top:e}),progressBar.attr({max:getDistanceToScroll(),value:getCurrentScrollPosition()})}function getDistanceToScroll(){return $(document).height()-$(window).height()}function resizeProgressBar(){progressBar.css({width:getWidthPercentage()+"%"})}function getWidthPercentage(){return getCurrentScrollPosition()/getDistanceToScroll()*100}const progressBar=$("#progress");window.onload=function(){setTimeout(progressBarSetup,50)};</script> </body> </html>